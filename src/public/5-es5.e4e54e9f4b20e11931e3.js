!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Sqk5:function(t,i,s){"use strict";s.r(i),s.d(i,"ChatModule",function(){return Y});var o=s("ofXK"),r=s("tyNb"),c=s("GUC0"),a=s.n(c),d=s("fXoL"),l=s("CFL1"),b=s("vWu4"),u=s("DNKV"),g=s("960V"),m=s("6NWb"),p=s("bruO"),h=function(){return["fas","spinner"]};function f(e,t){1&e&&(d.Ob(0,"div",19),d.Mb(1,"fa-icon",20),d.Mb(2,"br"),d.Mb(3,"br"),d.Ob(4,"h3"),d.zc(5,"Cargando ....."),d.Nb(),d.Nb()),2&e&&(d.xb(1),d.hc("icon",d.lc(2,h))("pulse",!0))}var v=function(){return["fas","arrow-circle-up"]};function O(e,t){if(1&e){var n=d.Pb();d.Ob(0,"div",26),d.Ob(1,"button",31),d.Vb("click",function(){return d.rc(n),d.Zb(2).moreSearchMessages()}),d.Mb(2,"fa-icon",32),d.Nb(),d.Nb()}2&e&&(d.xb(2),d.hc("icon",d.lc(1,v)))}function _(e,t){if(1&e){var n=d.Pb();d.Ob(0,"div",21),d.Ob(1,"div",22),d.Ob(2,"div",23),d.Ob(3,"h3",24),d.zc(4,"Buscando: "),d.Ob(5,"b"),d.zc(6),d.Nb(),d.Nb(),d.Ob(7,"h5",25),d.zc(8,"Resultados: "),d.Ob(9,"b"),d.zc(10),d.Nb(),d.Nb(),d.Nb(),d.Ob(11,"div",26),d.Ob(12,"button",27),d.Vb("click",function(){return d.rc(n),d.Zb().searchInput()}),d.Mb(13,"span",28),d.Nb(),d.Nb(),d.yc(14,O,3,2,"div",29),d.Ob(15,"div",26),d.Ob(16,"button",30),d.Vb("click",function(){return d.rc(n),d.Zb().hideSearch()}),d.Ob(17,"b"),d.zc(18,"\xd7"),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb()}if(2&e){var i=d.Zb();d.xb(6),d.Ac(i.search),d.xb(4),d.Ac(i.searchTotal),d.xb(4),d.hc("ngIf",i.searchTotal>i.msgs.length)}}function M(e,t){1&e&&(d.Ob(0,"div",33),d.Ob(1,"h4"),d.zc(2,"Seleccione un chat para mostrar sus mensajes.."),d.Nb(),d.Nb())}function x(e,t){1&e&&(d.Ob(0,"div",34),d.Ob(1,"h4",35),d.zc(2,"Sin mensajes ..."),d.Nb(),d.Nb())}function N(e,t){1&e&&(d.Ob(0,"div",33),d.Ob(1,"h5"),d.zc(2,"Sin m\xe1s mensajes."),d.Nb(),d.Nb())}function y(e,t){if(1&e&&(d.Ob(0,"p"),d.zc(1),d.Nb()),2&e){var n=d.Zb(2).$implicit;d.xb(1),d.Bc(" ",n.message," ")}}function I(e,t){if(1&e&&(d.Mb(0,"img",46),d.ac(1,"image")),2&e){var n=d.Zb(2).$implicit,i=d.Zb();d.ic("alt",n.message),d.hc("src",d.ec(1,2,n.message,i.userService.getToken(),"messages","../../assets/img/no-img.jpg"),d.tc)}}var w=function(){return["fas","file-archive"]};function S(e,t){1&e&&d.Mb(0,"fa-icon",47),2&e&&d.hc("icon",d.lc(1,w))}function k(e,t){if(1&e&&(d.Ob(0,"label"),d.zc(1),d.Nb()),2&e){var n=d.Zb(2).$implicit;d.xb(1),d.Ac(n.fileName)}}function C(e,t){if(1&e&&(d.Ob(0,"div"),d.Ob(1,"div",38),d.Ob(2,"div",39),d.Ob(3,"div",40),d.Mb(4,"img",41),d.ac(5,"image"),d.Nb(),d.Ob(6,"div",42),d.yc(7,y,2,1,"p",36),d.yc(8,I,2,7,"img",43),d.yc(9,S,1,2,"fa-icon",44),d.yc(10,k,2,1,"label",36),d.Ob(11,"span",45),d.zc(12),d.ac(13,"date"),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb()),2&e){var n=d.Zb().$implicit,i=d.Zb();d.xb(1),d.hc("id","msg-"+n._id),d.xb(3),d.ic("alt",n.sender.name),d.hc("src",d.ec(5,8,n.sender.thumbnail_photography,i.userService.getToken(),"photographyChat","../../assets/img/no-img.jpg"),d.tc),d.xb(3),d.hc("ngIf","TXT"===n.type),d.xb(1),d.hc("ngIf","IMG"===n.type),d.xb(1),d.hc("ngIf","FILE"===n.type),d.xb(1),d.hc("ngIf","IMG"===n.type||"FILE"===n.type),d.xb(2),d.Bc(" ",d.dc(13,13,n.date,"short","es"),"")}}function T(e,t){if(1&e&&(d.Ob(0,"p"),d.zc(1),d.Nb()),2&e){var n=d.Zb(2).$implicit;d.xb(1),d.Bc(" ",n.message," ")}}function E(e,t){if(1&e&&d.Mb(0,"fa-icon",55),2&e){var n=d.Zb(2).$implicit;d.hc("icon",d.lc(2,w))("pulse","SENDING"===n.status)}}function z(e,t){1&e&&d.Mb(0,"img",56),2&e&&d.hc("src","../../../../assets/img/warning_icon.svg",d.tc)}function P(e,t){if(1&e&&(d.Mb(0,"img",46),d.ac(1,"image")),2&e){var n=d.Zb(2).$implicit,i=d.Zb();d.ic("alt",n.message),d.hc("src",d.ec(1,2,n.message,i.userService.getToken(),"messages","../../assets/img/no-img.jpg"),d.tc)}}function Z(e,t){if(1&e&&d.Mb(0,"img",57),2&e){var n=d.Zb(2).$implicit;d.hc("id","imageSending-"+n._idTemp)("src",n.imageTemp,d.tc)}}function R(e,t){if(1&e&&(d.Ob(0,"label"),d.zc(1),d.Nb()),2&e){var n=d.Zb(2).$implicit;d.xb(1),d.Ac(n.fileName)}}function V(e,t){if(1&e&&(d.Ob(0,"div",58),d.Ob(1,"span",59),d.zc(2,"Enviando..."),d.Nb(),d.Nb()),2&e){var n=d.Zb(2).$implicit;d.hc("id","spinner-"+n._idTemp)}}function A(e,t){if(1&e){var n=d.Pb();d.Ob(0,"div",48),d.Ob(1,"div",49),d.Ob(2,"div",50),d.Vb("click",function(){d.rc(n);var e=d.Zb().$implicit;return d.Zb().messageOptions(e)}),d.yc(3,T,2,1,"p",36),d.yc(4,E,1,3,"fa-icon",51),d.yc(5,z,1,1,"img",52),d.yc(6,P,2,7,"img",43),d.yc(7,Z,1,2,"img",53),d.yc(8,R,2,1,"label",36),d.Ob(9,"span",45),d.zc(10),d.ac(11,"date"),d.Nb(),d.Nb(),d.yc(12,V,3,1,"div",54),d.Nb(),d.Nb()}if(2&e){var i=d.Zb().$implicit;d.hc("id",i._id||i._idTemp),d.xb(1),d.hc("id","msg-"+i._id||!1),d.xb(2),d.hc("ngIf","TXT"===i.type),d.xb(1),d.hc("ngIf","FILE"===i.type&&"ERROR"!==i.status),d.xb(1),d.hc("ngIf","FILE"===i.type&&"ERROR"===i.status),d.xb(1),d.hc("ngIf","IMG"===i.type&&"SENDING"!==i.status),d.xb(1),d.hc("ngIf","IMG"===i.type&&"SENDING"===i.status),d.xb(1),d.hc("ngIf","IMG"===i.type||"FILE"===i.type),d.xb(2),d.Bc(" ",d.dc(11,10,i.date,"short","es"),""),d.xb(2),d.hc("ngIf","SENDING"==i.status)}}function F(e,t){if(1&e&&(d.Ob(0,"div"),d.yc(1,C,14,17,"div",36),d.yc(2,A,13,14,"div",37),d.Nb()),2&e){var n=t.$implicit,i=d.Zb();d.xb(1),d.hc("ngIf",n.sender._id!==i.userService.getUserAuth()._id),d.xb(1),d.hc("ngIf",n.sender._id===i.userService.getUserAuth()._id)}}function j(e,t){if(1&e){var n=d.Pb();d.Ob(0,"div",60),d.Ob(1,"div",61),d.Mb(2,"input",62),d.Nb(),d.Ob(3,"div",63),d.Ob(4,"button",64),d.Vb("click",function(){return d.rc(n),d.Zb().deleteMessage()}),d.Mb(5,"span",65),d.Nb(),d.Nb(),d.Ob(6,"div",63),d.Ob(7,"button",30),d.Vb("click",function(){return d.rc(n),d.Zb().closeMessageOptions()}),d.Ob(8,"b"),d.zc(9,"\xd7"),d.Nb(),d.Nb(),d.Nb(),d.Nb()}}function U(e,t){if(1&e){var n=d.Pb();d.Ob(0,"div",22),d.Ob(1,"div",66),d.Ob(2,"textarea",67,68),d.Vb("keydown.enter",function(e){d.rc(n);var t=d.pc(3);return d.Zb().sendMsg(t.value,e)}),d.Nb(),d.Ob(4,"button",69),d.Vb("click",function(e){d.rc(n);var t=d.pc(3);return d.Zb().sendMsg(t.value,e)}),d.Mb(5,"span",70),d.Nb(),d.Ob(6,"button",71),d.Vb("click",function(e){return d.rc(n),d.Zb().newMsg(e)}),d.Nb(),d.Nb(),d.Nb()}}function D(e,t){if(1&e){var n=d.Pb();d.Ob(0,"div",72),d.Ob(1,"div",73),d.Ob(2,"button",74),d.Vb("click",function(){return d.rc(n),d.Zb().searchInput()}),d.Mb(3,"span",28),d.Nb(),d.Nb(),d.Ob(4,"div",73),d.Ob(5,"button",74),d.Vb("click",function(){return d.rc(n),d.Zb().uploadImg()}),d.Mb(6,"span",75),d.Nb(),d.Nb(),d.Ob(7,"div",73),d.Ob(8,"button",74),d.Vb("click",function(){return d.rc(n),d.Zb().uploadFile()}),d.Mb(9,"span",76),d.Nb(),d.Nb(),d.Nb()}}var L=function(){return["fas","ellipsis-v"]},G=function(){return["fas","trash"]},B=function(){return["fas","spinner"]};function H(e,t){1&e&&(d.Ob(0,"div",1),d.Mb(1,"fa-icon",2),d.Mb(2,"br"),d.Mb(3,"br"),d.Ob(4,"h3"),d.zc(5,"Cargando ....."),d.Nb(),d.Nb()),2&e&&(d.xb(1),d.hc("icon",d.lc(2,B))("pulse",!0))}var W,X,q,J=r.g.forChild([{path:"conversation/:id",component:(X=function(){function t(n,i,s,o,r,c,a){e(this,t),this.router=n,this.userService=i,this.chatService=s,this.messageService=o,this.activatedRoute=r,this.modalUploadService=c,this.modalUploadFileService=a,this.participants=[],this.total=0,this.from=0,this.loading=!0,this.lastMsgs=!1,this.searchOption=!1,this.searchTotal=0,this.showOptionsMsg=!1,this.heightComponents=250,this.height=window.innerHeight-this.heightComponents,this.msgs=[]}return n(t,[{key:"onWindowResize",value:function(e){var t=e.target;t.innerWidth<=991?this.classHeight="height: 100%;":(this.height=t.innerHeight-this.heightComponents,this.classHeight="height: "+this.height+"px;")}},{key:"ngAfterViewChecked",value:function(){this.searchOption||document.getElementById("endChat").scrollIntoView(!1)}},{key:"ngOnInit",value:function(){var e=this;this.activatedRoute.params.subscribe(function(t){e.room=t.id,e.loadMessages()}),this.modalUploadService.notif.subscribe(function(t){$("#msg-"+t._idTemp).attr("id","msg-"+t._id),e.removeSpinner(t._idTemp)}),this.modalUploadService.imageSelectedAndUpload.subscribe(function(t){var n={room:e.room,message:"",imageTemp:t.image,type:"IMG",_idTemp:t._idTemp,status:"SENDING"};n.date=new Date,n.sender=e.userService.getUserAuth(),e.addMsg(n)}),this.modalUploadService.notifError.subscribe(function(t){a()("No se envi\xf3 el mensaje!!","Int\xe9ntelo de nuevo.\nerr.err","error"),e.removeSpinner(t._idTemp),$("#imageSending-"+t._idTemp).addClass("img-no-send")}),this.modalUploadFileService.fileSelectedAndUpload.subscribe(function(t){var n={room:e.room,message:"",fileName:t.fileName,type:"FILE",_idTemp:t._idTemp,status:"SENDING"};n.date=new Date,n.sender=e.userService.getUserAuth(),e.addMsg(n)}),this.modalUploadFileService.notif.subscribe(function(t){$("#msg-"+t._idTemp).attr("id","msg-"+t._id),e.removeSpinner(t._idTemp),e.msgs=e.msgs.filter(function(e){return e._idTemp===t._idTemp&&(e.status=t.data.status,e._id=t.data._id,e._idTemp=t.data._id),e})}),this.modalUploadFileService.notifError.subscribe(function(t){a()("No se envi\xf3 el mensaje!!","Int\xe9ntelo de nuevo.\n"+t.err,"error"),e.removeSpinner(t._idTemp),e.msgs=e.msgs.filter(function(e){return e._idTemp===t._idTemp&&(e.status="ERROR"),e})}),socket.on("new-message",function(t){t.msg.sender=t.infoUser,e.addMsg(t.msg),e.newMsgEventEmit()})}},{key:"uploadImg",value:function(){this.modalUploadService.showModal("img","chat",null,"POST",this.room,999999999*(new Date).getMilliseconds()+"")}},{key:"uploadFile",value:function(){this.modalUploadFileService.showModal("file","chat",null,"POST",this.room,999999999*(new Date).getMilliseconds()+"")}},{key:"loadMessages",value:function(){var e=this;this.loading=!0,this.messageService.getMsgs(this.room,this.from).subscribe(function(t){e.loading=!1,e.msgs=t.msgs,e.msgs=e.msgs.reverse(),e.roomInfo=t.room,e.participants=e.participants.concat(t.room.admins,t.room.participants),e.total=t.total,e.room=t.room._id,document.getElementById("endChat")},function(t){a()("No se pudo obtener sus mensajes.","Int\xe9ntelo de nuevo.\n"+t,"error"),e.loading=!1,e.router.navigate(["/profile/chat"])})}},{key:"messageOptions",value:function(e){this.msgSelected&&$("#msg-"+this.msgSelected._id||!1).removeClass("bg-info"),this.showOptionsMsg=this.msgSelected!=e||!this.showOptionsMsg,this.msgSelected=e,$("#msg-"+e._id||!1).addClass("bg-info")}},{key:"closeMessageOptions",value:function(){this.showOptionsMsg=!this.showOptionsMsg,$("#msg-"+this.msgSelected._id||!1).removeClass("bg-info")}},{key:"deleteMessage",value:function(){var e=this;a()({title:"\xbfSe encuentra segur@?",text:"El elemento se borrar\xe1 definitivamente, \xbfconfirma la acci\xf3n?",icon:"warning",buttons:["Cancelar","De acuerdo"],dangerMode:!0}).then(function(t){t&&e.messageService.deleteMessage(e.msgSelected).subscribe(function(t){a()("Mensaje eliminado correctamente!","","success"),$("#"+t._id).remove(),e.showOptionsMsg=!1},function(e){return a()("Ocurrio un error!","No se pudo eliminar el mensaje!! \n"+e,"error")})})}},{key:"searchInput",value:function(){var e=this;a()({content:{element:"input",attributes:{placeholder:"Ingrese su b\xfasqueda",type:"text"}},buttons:{confirm:!0,cancel:!0}}).then(function(t){t&&(e.loading=!0,e.search=t,e.searchOption=!0,e.messageService.searchMessages(e.room,e.search).subscribe(function(t){e.msgs=t.msgs.reverse(),e.loading=!1,e.searchTotal=t.total,0===e.total&&a()({title:"Sin resultados!!",icon:"info"})},function(t){e.loading=!0,e.showSwalError(t),e.loadMessages(),console.log(t)}))})}},{key:"moreSearchMessages",value:function(){var e=this;this.loading=!0,this.from+=10,this.messageService.searchMessages(this.room,this.search,this.from).subscribe(function(t){console.log(t.msgs),e.msgs=t.msgs.reverse().concat(e.msgs.concat()),console.log(e.msgs),e.loading=!1},function(t){e.loading=!0,e.showSwalError(t),e.loadMessages(),console.log(t)})}},{key:"hideSearch",value:function(){this.searchOption=!1,this.from=0,this.searchTotal=0,this.loadMessages()}},{key:"deleteChat",value:function(){var e=this;a()({title:"\xbfSe encuentra segur@?",text:"Est\xe1 opci\xf3n eliminar\xe1 de manera PERMANENTE todos los mensajes, im\xe1genes, archivos de la conversaci\xf3n. ",icon:"warning",buttons:["Cancelar","De acuerdo"],dangerMode:!0}).then(function(t){t&&e.chatService.deleteChat(e.room).subscribe(function(t){a()("Conversaci\xf3n eliminada correctamente!","Mensajes eliminados: ".concat(t.totalMessagesDeleted,"\nArchivos eliminados: ").concat(t.totalFilesDeleted),"success"),e.router.navigate(["profile/chat"])},function(e){return a()("Ocurrio un error!","No se pudo eliminar la conversaci\xf3n!! \n"+e,"error")})})}},{key:"sendMsg",value:function(e,t){var n=this;if(t.preventDefault(),void 0===this.room)return a()("Chat inv\xe1lido!","","error"),void this.router.navigate(["/profile/chat/"]);if(""!==e){var i={room:this.room,message:e,type:"TXT",_idTemp:this.getIdTmp(),status:"SENDING"};i.date=new Date,i.sender=this.userService.getUserAuth(),$("#inputMessageTxt").val(""),"CHAT"===this.roomInfo.type?(i.contact=this.participants.filter(function(e){return e._id!==n.userService.getUserAuth()._id})[0],this.messageService.sendMessage(i).subscribe(function(e){$("#msg-"+i._idTemp).attr("id","msg-"+e.data._id),n.msgs=n.msgs.filter(function(t){return t._idTemp===i._idTemp&&(t._id=e.data._id,t.status=e.data.status),t}),n.removeSpinner(i._idTemp),i.status=e.data.status},function(e){a()("No se envi\xf3 el mensaje!!","Int\xe9ntelo de nuevo.\n"+e,"error")})):i.participants=this.participants,this.addMsg(i)}else a()("Mensaje vac\xedo!","","warning")}},{key:"addMsg",value:function(e){this.msgs.push(e)}},{key:"newMsg",value:function(e){e.preventDefault()}},{key:"newMsgEventEmit",value:function(){$("#newMsgButton").click()}},{key:"getIdTmp",value:function(){return 999999999*(new Date).getMilliseconds()+""}},{key:"removeSpinner",value:function(e){$("#spinner-"+e).remove()}},{key:"showSwalError",value:function(e){a()({title:"Ha ocurrido un error!!",text:"Int\xe9ntelo de nuevo por favor."+e,icon:"error"})}}]),t}(),X.\u0275fac=function(e){return new(e||X)(d.Lb(r.c),d.Lb(l.a),d.Lb(b.e),d.Lb(b.j),d.Lb(r.a),d.Lb(u.a),d.Lb(g.a))},X.\u0275cmp=d.Fb({type:X,selectors:[["app-messages"]],hostBindings:function(e,t){1&e&&d.Vb("resize",function(e){return t.onWindowResize(e)},!1,d.qc)},decls:28,vars:15,consts:[["class","alert alert-info text-center p-4 rounded rounded-lg animated bounceIn","role","alert",4,"ngIf"],["class","container mt-2",4,"ngIf"],["id","container-msg",1,"mb-5","mb-lg-0"],[1,"dropdown"],["size","2x","id","optionsChat","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"pointer","options-chat",3,"icon"],["aria-labelledby","optionsChat",1,"dropdown-menu","rounded","animated","fadeIn"],["type","button",1,"dropdown-item",3,"click"],["size","2x",1,"text-danger",3,"icon"],[1,"msg_history"],["class","text-center text-muted font-italic",4,"ngIf"],["class","text-center text-muted font-italic pt-5 mt-5",4,"ngIf"],["id","msgs-container"],[4,"ngFor","ngForOf"],["id","endChat"],[1,"type_msg"],[1,"input_msg_write"],["class","row pr-2",4,"ngIf"],["class","row",4,"ngIf"],["class","row pr-4",4,"ngIf"],["role","alert",1,"alert","alert-info","text-center","p-4","rounded","rounded-lg","animated","bounceIn"],["size","5x",3,"icon","pulse"],[1,"container","mt-2"],[1,"row"],[1,"col-12","col-md-9"],[1,"text-break"],[1,"text-muted"],[1,"col-1"],["type","button",1,"btn","btn-info","btn-lg",3,"click"],[1,"icon-search"],["class","col-1",4,"ngIf"],["type","button",1,"btn","btn-danger","btn-lg",3,"click"],["type","button",1,"btn","btn-success","btn-lg",3,"click"],["size","lg",3,"icon"],[1,"text-center","text-muted","font-italic"],[1,"text-center","text-muted","font-italic","pt-5","mt-5"],[1,"text-primary"],[4,"ngIf"],[3,"id",4,"ngIf"],[1,"animated","fadeIn",3,"id"],[1,"received_withd_msg"],[1,"chat_photo"],[1,"img","img-fluid","width-50","rounded","rounded-lg","ml-2",3,"src","alt"],[1,"received_msg"],["name","msg-image","class","img img-fluid rounded rounded-lg ml-2",3,"src","alt",4,"ngIf"],["class","text-secondary","size","5x",3,"icon",4,"ngIf"],[1,"time_date"],["name","msg-image",1,"img","img-fluid","rounded","rounded-lg","ml-2",3,"src","alt"],["size","5x",1,"text-secondary",3,"icon"],[3,"id"],[1,"outgoing_msg","animated","fadeIn",3,"id"],[1,"sent_msg",3,"click"],["class","text-info","size","5x",3,"icon","pulse",4,"ngIf"],["name","msg-image","class","img img-fluid rounded rounded-lg ml-2","alt","ERROR AL ENVIAR ARCHIVO",3,"src",4,"ngIf"],["name","msg-image","class","img img-fluid rounded rounded-lg ml-2","alt","Enviando ...",3,"id","src",4,"ngIf"],["class","spinner-border text-info","role","status",3,"id",4,"ngIf"],["size","5x",1,"text-info",3,"icon","pulse"],["name","msg-image","alt","ERROR AL ENVIAR ARCHIVO",1,"img","img-fluid","rounded","rounded-lg","ml-2",3,"src"],["name","msg-image","alt","Enviando ...",1,"img","img-fluid","rounded","rounded-lg","ml-2",3,"id","src"],["role","status",1,"spinner-border","text-info",3,"id"],[1,"sr-only"],[1,"row","pr-2"],["col","col"],[1,"form-control","invisible","col-1"],[1,"col","text-right"],["type","button",1,"btn_msg_send_trash",3,"click"],[1,"icon-bin"],[1,"col-12"],["name","mensajeTxt","id","inputMessageTxt","placeholder","Escriba un mensaje...","autofocus","","rows","1","autofocus","",1,"form-control","escribirMsg",3,"defaultValue","keydown.enter"],["mensaje",""],["type","button","id","submitMsgButton",1,"btn_msg_send",3,"click"],[1,"icon-forward3"],["type","button","id","newMsgButton",1,"btn_msg_send","d-none",3,"click"],[1,"row","pr-4"],[1,"col"],["type","button",1,"btn_msg_send",3,"click"],[1,"icon-file-picture"],[1,"icon-files-empty"]],template:function(e,t){1&e&&(d.yc(0,f,6,3,"div",0),d.yc(1,_,19,3,"div",1),d.Mb(2,"hr"),d.Ob(3,"div",2),d.Ob(4,"div",3),d.Mb(5,"fa-icon",4),d.Ob(6,"div",5),d.Ob(7,"button",6),d.Vb("click",function(){return t.deleteChat()}),d.Mb(8,"fa-icon",7),d.Ob(9,"b"),d.zc(10,"Eliminar chat"),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Ob(11,"div",8),d.yc(12,M,3,0,"div",9),d.yc(13,x,3,0,"div",10),d.yc(14,N,3,0,"div",9),d.Ob(15,"div",11),d.yc(16,F,3,2,"div",12),d.Mb(17,"label",13),d.Nb(),d.Nb(),d.Ob(18,"div",14),d.Ob(19,"div",15),d.yc(20,j,10,0,"div",16),d.yc(21,U,7,0,"div",17),d.yc(22,D,10,0,"div",18),d.Nb(),d.Nb(),d.Nb(),d.Mb(23,"br"),d.Mb(24,"br"),d.Mb(25,"br"),d.Mb(26,"br"),d.Mb(27,"br")),2&e&&(d.hc("ngIf",t.loading),d.xb(1),d.hc("ngIf",t.searchOption),d.xb(2),d.wc("max-height: "+t.height+"px;"),d.xb(2),d.hc("icon",d.lc(13,L)),d.xb(3),d.hc("icon",d.lc(14,G)),d.xb(4),d.hc("ngIf",!t.room||""===t.room),d.xb(1),d.hc("ngIf",0===t.msgs.length),d.xb(1),d.hc("ngIf",t.lastMsgs&&t.msgs.length>0),d.xb(2),d.hc("ngForOf",t.msgs),d.xb(4),d.hc("ngIf",t.showOptionsMsg),d.xb(1),d.hc("ngIf",!t.searchOption),d.xb(1),d.hc("ngIf",!t.searchOption))},directives:[o.l,m.a,o.k],pipes:[p.a,o.e],styles:[".options-chat[_ngcontent-%COMP%]{float:right;padding:0;margin:0}.btn_msg_send[_ngcontent-%COMP%]{background:#05728f none repeat scroll 0 0;top:0;width:50px}.btn_msg_send[_ngcontent-%COMP%], .btn_msg_send_search[_ngcontent-%COMP%]{border:none;border-radius:20%;color:#fff;cursor:pointer;font-size:30px;height:40px;position:absolute;right:0}.btn_msg_send_search[_ngcontent-%COMP%]{background:orange none repeat scroll 0 0;width:70px;top:5px}.msg_history[_ngcontent-%COMP%]{height:335px;overflow-y:auto}.chat_photo[_ngcontent-%COMP%]{display:inline-block}.received_withd_msg[_ngcontent-%COMP%]{max-width:70%}.received_withd_msg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:#ebebeb none repeat scroll 0 0;border-radius:3px;color:#646464;font-size:14px;margin:0;padding:5px 10px 5px 12px;width:100%}.received_msg[_ngcontent-%COMP%]{display:inline-block;padding:0 0 0 10px;vertical-align:top;max-width:80%}.time_date[_ngcontent-%COMP%]{color:#747474;display:block;font-size:12px;margin:8px 0 0}.outgoing_msg[_ngcontent-%COMP%]{overflow:hidden;margin:26px 0;cursor:pointer}.sent_msg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:#05728f none repeat scroll 0 0;border-radius:3px;font-size:14px;margin:0;color:#fff;padding:5px 10px 5px 12px}.sent_msg[_ngcontent-%COMP%]{float:right;max-width:50%}.type_msg[_ngcontent-%COMP%]{border-top:1px solid #c4c4c4;border-bottom:1px solid #c4c4c4;position:relative}.input_msg_write[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent none repeat scroll 0 0;border:none;color:#4c4c4c;font-size:15px;min-height:48px;width:100%}.btn_msg_send_trash[_ngcontent-%COMP%]{background:red none repeat scroll 0 0;border:none;border-radius:20%;color:#fff;cursor:pointer;font-size:30px;height:40px;position:absolute;right:0;width:70px;top:5px}.escribirMsg[_ngcontent-%COMP%]{width:90%}img[_ngcontent-%COMP%]{background:transparent url(Wedges-3s-200px.2f0125661784f23fc6a0.svg) 50% no-repeat}.img-no-send[_ngcontent-%COMP%]{opacity:.25}"]}),X),data:{title:"Chat"}},{path:"conversation/new/:id",component:(W=function(){function t(n,i,s){var o=this;e(this,t),this.router=n,this.activatedRoute=i,this.chatService=s,this.loading=!0,this.activatedRoute.params.subscribe(function(e){o.createChat(e.id)})}return n(t,[{key:"ngOnInit",value:function(){}},{key:"createChat",value:function(e){var t=this;this.chatService.createChat(e).subscribe(function(e){t.router.navigate(["/profile/chat/conversation",e])},function(e){a()("No se realiz\xf3 la creaci\xf3n del chat","Int\xe9ntelo de nuevo.\n"+e,"error"),t.loading=!1,t.router.navigate(["/profile/chat"])})}}]),t}(),W.\u0275fac=function(e){return new(e||W)(d.Lb(r.c),d.Lb(r.a),d.Lb(b.e))},W.\u0275cmp=d.Fb({type:W,selectors:[["app-create-room"]],decls:1,vars:1,consts:[["class","alert alert-info text-center p-4 rounded rounded-lg animated bounceIn","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-info","text-center","p-4","rounded","rounded-lg","animated","bounceIn"],["size","5x",3,"icon","pulse"]],template:function(e,t){1&e&&d.yc(0,H,6,3,"div",0),2&e&&d.hc("ngIf",t.loading)},directives:[o.l,m.a],encapsulation:2}),W),data:{title:"Chat"}},{path:"**",pathMatch:"full",redirectTo:"PageNotFound",data:{title:"Page Not Found"}}]),K=s("iTUp"),Q=s("wHSu"),Y=((q=function t(n){e(this,t),n.addIcons(Q.n,Q.l,Q.f,Q.r,Q.q,Q.g,Q.a)}).\u0275mod=d.Jb({type:q}),q.\u0275inj=d.Ib({factory:function(e){return new(e||q)(d.Sb(m.b))},providers:[b.e],imports:[[o.b,J,m.c,K.a]]}),q)}}])}();