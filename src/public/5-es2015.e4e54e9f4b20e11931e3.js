(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Sqk5:function(e,t,i){"use strict";i.r(t),i.d(t,"ChatModule",function(){return X});var n=i("ofXK"),s=i("tyNb"),o=i("GUC0"),c=i.n(o),r=i("fXoL"),a=i("CFL1"),d=i("vWu4"),b=i("DNKV"),l=i("960V"),g=i("6NWb"),h=i("bruO");const m=function(){return["fas","spinner"]};function u(e,t){1&e&&(r.Ob(0,"div",19),r.Mb(1,"fa-icon",20),r.Mb(2,"br"),r.Mb(3,"br"),r.Ob(4,"h3"),r.zc(5,"Cargando ....."),r.Nb(),r.Nb()),2&e&&(r.xb(1),r.hc("icon",r.lc(2,m))("pulse",!0))}const p=function(){return["fas","arrow-circle-up"]};function f(e,t){if(1&e){const e=r.Pb();r.Ob(0,"div",26),r.Ob(1,"button",31),r.Vb("click",function(){return r.rc(e),r.Zb(2).moreSearchMessages()}),r.Mb(2,"fa-icon",32),r.Nb(),r.Nb()}2&e&&(r.xb(2),r.hc("icon",r.lc(1,p)))}function v(e,t){if(1&e){const e=r.Pb();r.Ob(0,"div",21),r.Ob(1,"div",22),r.Ob(2,"div",23),r.Ob(3,"h3",24),r.zc(4,"Buscando: "),r.Ob(5,"b"),r.zc(6),r.Nb(),r.Nb(),r.Ob(7,"h5",25),r.zc(8,"Resultados: "),r.Ob(9,"b"),r.zc(10),r.Nb(),r.Nb(),r.Nb(),r.Ob(11,"div",26),r.Ob(12,"button",27),r.Vb("click",function(){return r.rc(e),r.Zb().searchInput()}),r.Mb(13,"span",28),r.Nb(),r.Nb(),r.yc(14,f,3,2,"div",29),r.Ob(15,"div",26),r.Ob(16,"button",30),r.Vb("click",function(){return r.rc(e),r.Zb().hideSearch()}),r.Ob(17,"b"),r.zc(18,"\xd7"),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb()}if(2&e){const e=r.Zb();r.xb(6),r.Ac(e.search),r.xb(4),r.Ac(e.searchTotal),r.xb(4),r.hc("ngIf",e.searchTotal>e.msgs.length)}}function O(e,t){1&e&&(r.Ob(0,"div",33),r.Ob(1,"h4"),r.zc(2,"Seleccione un chat para mostrar sus mensajes.."),r.Nb(),r.Nb())}function _(e,t){1&e&&(r.Ob(0,"div",34),r.Ob(1,"h4",35),r.zc(2,"Sin mensajes ..."),r.Nb(),r.Nb())}function M(e,t){1&e&&(r.Ob(0,"div",33),r.Ob(1,"h5"),r.zc(2,"Sin m\xe1s mensajes."),r.Nb(),r.Nb())}function x(e,t){if(1&e&&(r.Ob(0,"p"),r.zc(1),r.Nb()),2&e){const e=r.Zb(2).$implicit;r.xb(1),r.Bc(" ",e.message," ")}}function N(e,t){if(1&e&&(r.Mb(0,"img",46),r.ac(1,"image")),2&e){const e=r.Zb(2).$implicit,t=r.Zb();r.ic("alt",e.message),r.hc("src",r.ec(1,2,e.message,t.userService.getToken(),"messages","../../assets/img/no-img.jpg"),r.tc)}}const I=function(){return["fas","file-archive"]};function w(e,t){1&e&&r.Mb(0,"fa-icon",47),2&e&&r.hc("icon",r.lc(1,I))}function y(e,t){if(1&e&&(r.Ob(0,"label"),r.zc(1),r.Nb()),2&e){const e=r.Zb(2).$implicit;r.xb(1),r.Ac(e.fileName)}}function S(e,t){if(1&e&&(r.Ob(0,"div"),r.Ob(1,"div",38),r.Ob(2,"div",39),r.Ob(3,"div",40),r.Mb(4,"img",41),r.ac(5,"image"),r.Nb(),r.Ob(6,"div",42),r.yc(7,x,2,1,"p",36),r.yc(8,N,2,7,"img",43),r.yc(9,w,1,2,"fa-icon",44),r.yc(10,y,2,1,"label",36),r.Ob(11,"span",45),r.zc(12),r.ac(13,"date"),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb()),2&e){const e=r.Zb().$implicit,t=r.Zb();r.xb(1),r.hc("id","msg-"+e._id),r.xb(3),r.ic("alt",e.sender.name),r.hc("src",r.ec(5,8,e.sender.thumbnail_photography,t.userService.getToken(),"photographyChat","../../assets/img/no-img.jpg"),r.tc),r.xb(3),r.hc("ngIf","TXT"===e.type),r.xb(1),r.hc("ngIf","IMG"===e.type),r.xb(1),r.hc("ngIf","FILE"===e.type),r.xb(1),r.hc("ngIf","IMG"===e.type||"FILE"===e.type),r.xb(2),r.Bc(" ",r.dc(13,13,e.date,"short","es"),"")}}function C(e,t){if(1&e&&(r.Ob(0,"p"),r.zc(1),r.Nb()),2&e){const e=r.Zb(2).$implicit;r.xb(1),r.Bc(" ",e.message," ")}}function T(e,t){if(1&e&&r.Mb(0,"fa-icon",55),2&e){const e=r.Zb(2).$implicit;r.hc("icon",r.lc(2,I))("pulse","SENDING"===e.status)}}function k(e,t){1&e&&r.Mb(0,"img",56),2&e&&r.hc("src","../../../../assets/img/warning_icon.svg",r.tc)}function E(e,t){if(1&e&&(r.Mb(0,"img",46),r.ac(1,"image")),2&e){const e=r.Zb(2).$implicit,t=r.Zb();r.ic("alt",e.message),r.hc("src",r.ec(1,2,e.message,t.userService.getToken(),"messages","../../assets/img/no-img.jpg"),r.tc)}}function z(e,t){if(1&e&&r.Mb(0,"img",57),2&e){const e=r.Zb(2).$implicit;r.hc("id","imageSending-"+e._idTemp)("src",e.imageTemp,r.tc)}}function P(e,t){if(1&e&&(r.Ob(0,"label"),r.zc(1),r.Nb()),2&e){const e=r.Zb(2).$implicit;r.xb(1),r.Ac(e.fileName)}}function Z(e,t){if(1&e&&(r.Ob(0,"div",58),r.Ob(1,"span",59),r.zc(2,"Enviando..."),r.Nb(),r.Nb()),2&e){const e=r.Zb(2).$implicit;r.hc("id","spinner-"+e._idTemp)}}function R(e,t){if(1&e){const e=r.Pb();r.Ob(0,"div",48),r.Ob(1,"div",49),r.Ob(2,"div",50),r.Vb("click",function(){r.rc(e);const t=r.Zb().$implicit;return r.Zb().messageOptions(t)}),r.yc(3,C,2,1,"p",36),r.yc(4,T,1,3,"fa-icon",51),r.yc(5,k,1,1,"img",52),r.yc(6,E,2,7,"img",43),r.yc(7,z,1,2,"img",53),r.yc(8,P,2,1,"label",36),r.Ob(9,"span",45),r.zc(10),r.ac(11,"date"),r.Nb(),r.Nb(),r.yc(12,Z,3,1,"div",54),r.Nb(),r.Nb()}if(2&e){const e=r.Zb().$implicit;r.hc("id",e._id||e._idTemp),r.xb(1),r.hc("id","msg-"+e._id||!1),r.xb(2),r.hc("ngIf","TXT"===e.type),r.xb(1),r.hc("ngIf","FILE"===e.type&&"ERROR"!==e.status),r.xb(1),r.hc("ngIf","FILE"===e.type&&"ERROR"===e.status),r.xb(1),r.hc("ngIf","IMG"===e.type&&"SENDING"!==e.status),r.xb(1),r.hc("ngIf","IMG"===e.type&&"SENDING"===e.status),r.xb(1),r.hc("ngIf","IMG"===e.type||"FILE"===e.type),r.xb(2),r.Bc(" ",r.dc(11,10,e.date,"short","es"),""),r.xb(2),r.hc("ngIf","SENDING"==e.status)}}function V(e,t){if(1&e&&(r.Ob(0,"div"),r.yc(1,S,14,17,"div",36),r.yc(2,R,13,14,"div",37),r.Nb()),2&e){const e=t.$implicit,i=r.Zb();r.xb(1),r.hc("ngIf",e.sender._id!==i.userService.getUserAuth()._id),r.xb(1),r.hc("ngIf",e.sender._id===i.userService.getUserAuth()._id)}}function A(e,t){if(1&e){const e=r.Pb();r.Ob(0,"div",60),r.Ob(1,"div",61),r.Mb(2,"input",62),r.Nb(),r.Ob(3,"div",63),r.Ob(4,"button",64),r.Vb("click",function(){return r.rc(e),r.Zb().deleteMessage()}),r.Mb(5,"span",65),r.Nb(),r.Nb(),r.Ob(6,"div",63),r.Ob(7,"button",30),r.Vb("click",function(){return r.rc(e),r.Zb().closeMessageOptions()}),r.Ob(8,"b"),r.zc(9,"\xd7"),r.Nb(),r.Nb(),r.Nb(),r.Nb()}}function F(e,t){if(1&e){const e=r.Pb();r.Ob(0,"div",22),r.Ob(1,"div",66),r.Ob(2,"textarea",67,68),r.Vb("keydown.enter",function(t){r.rc(e);const i=r.pc(3);return r.Zb().sendMsg(i.value,t)}),r.Nb(),r.Ob(4,"button",69),r.Vb("click",function(t){r.rc(e);const i=r.pc(3);return r.Zb().sendMsg(i.value,t)}),r.Mb(5,"span",70),r.Nb(),r.Ob(6,"button",71),r.Vb("click",function(t){return r.rc(e),r.Zb().newMsg(t)}),r.Nb(),r.Nb(),r.Nb()}}function U(e,t){if(1&e){const e=r.Pb();r.Ob(0,"div",72),r.Ob(1,"div",73),r.Ob(2,"button",74),r.Vb("click",function(){return r.rc(e),r.Zb().searchInput()}),r.Mb(3,"span",28),r.Nb(),r.Nb(),r.Ob(4,"div",73),r.Ob(5,"button",74),r.Vb("click",function(){return r.rc(e),r.Zb().uploadImg()}),r.Mb(6,"span",75),r.Nb(),r.Nb(),r.Ob(7,"div",73),r.Ob(8,"button",74),r.Vb("click",function(){return r.rc(e),r.Zb().uploadFile()}),r.Mb(9,"span",76),r.Nb(),r.Nb(),r.Nb()}}const j=function(){return["fas","ellipsis-v"]},D=function(){return["fas","trash"]},L=function(){return["fas","spinner"]};function G(e,t){1&e&&(r.Ob(0,"div",1),r.Mb(1,"fa-icon",2),r.Mb(2,"br"),r.Mb(3,"br"),r.Ob(4,"h3"),r.zc(5,"Cargando ....."),r.Nb(),r.Nb()),2&e&&(r.xb(1),r.hc("icon",r.lc(2,L))("pulse",!0))}const B=s.g.forChild([{path:"conversation/:id",component:(()=>{class e{constructor(e,t,i,n,s,o,c){this.router=e,this.userService=t,this.chatService=i,this.messageService=n,this.activatedRoute=s,this.modalUploadService=o,this.modalUploadFileService=c,this.participants=[],this.total=0,this.from=0,this.loading=!0,this.lastMsgs=!1,this.searchOption=!1,this.searchTotal=0,this.showOptionsMsg=!1,this.heightComponents=250,this.height=window.innerHeight-this.heightComponents,this.msgs=[]}onWindowResize(e){const t=e.target;t.innerWidth<=991?this.classHeight="height: 100%;":(this.height=t.innerHeight-this.heightComponents,this.classHeight="height: "+this.height+"px;")}ngAfterViewChecked(){this.searchOption||document.getElementById("endChat").scrollIntoView(!1)}ngOnInit(){this.activatedRoute.params.subscribe(e=>{this.room=e.id,this.loadMessages()}),this.modalUploadService.notif.subscribe(e=>{$("#msg-"+e._idTemp).attr("id","msg-"+e._id),this.removeSpinner(e._idTemp)}),this.modalUploadService.imageSelectedAndUpload.subscribe(e=>{const t={room:this.room,message:"",imageTemp:e.image,type:"IMG",_idTemp:e._idTemp,status:"SENDING"};t.date=new Date,t.sender=this.userService.getUserAuth(),this.addMsg(t)}),this.modalUploadService.notifError.subscribe(e=>{c()("No se envi\xf3 el mensaje!!","Int\xe9ntelo de nuevo.\nerr.err","error"),this.removeSpinner(e._idTemp),$("#imageSending-"+e._idTemp).addClass("img-no-send")}),this.modalUploadFileService.fileSelectedAndUpload.subscribe(e=>{const t={room:this.room,message:"",fileName:e.fileName,type:"FILE",_idTemp:e._idTemp,status:"SENDING"};t.date=new Date,t.sender=this.userService.getUserAuth(),this.addMsg(t)}),this.modalUploadFileService.notif.subscribe(e=>{$("#msg-"+e._idTemp).attr("id","msg-"+e._id),this.removeSpinner(e._idTemp),this.msgs=this.msgs.filter(t=>(t._idTemp===e._idTemp&&(t.status=e.data.status,t._id=e.data._id,t._idTemp=e.data._id),t))}),this.modalUploadFileService.notifError.subscribe(e=>{c()("No se envi\xf3 el mensaje!!","Int\xe9ntelo de nuevo.\n"+e.err,"error"),this.removeSpinner(e._idTemp),this.msgs=this.msgs.filter(t=>(t._idTemp===e._idTemp&&(t.status="ERROR"),t))}),socket.on("new-message",e=>{e.msg.sender=e.infoUser,this.addMsg(e.msg),this.newMsgEventEmit()})}uploadImg(){this.modalUploadService.showModal("img","chat",null,"POST",this.room,999999999*(new Date).getMilliseconds()+"")}uploadFile(){this.modalUploadFileService.showModal("file","chat",null,"POST",this.room,999999999*(new Date).getMilliseconds()+"")}loadMessages(){this.loading=!0,this.messageService.getMsgs(this.room,this.from).subscribe(e=>{this.loading=!1,this.msgs=e.msgs,this.msgs=this.msgs.reverse(),this.roomInfo=e.room,this.participants=this.participants.concat(e.room.admins,e.room.participants),this.total=e.total,this.room=e.room._id,document.getElementById("endChat")},e=>{c()("No se pudo obtener sus mensajes.","Int\xe9ntelo de nuevo.\n"+e,"error"),this.loading=!1,this.router.navigate(["/profile/chat"])})}messageOptions(e){this.msgSelected&&$("#msg-"+this.msgSelected._id||!1).removeClass("bg-info"),this.showOptionsMsg=this.msgSelected!=e||!this.showOptionsMsg,this.msgSelected=e,$("#msg-"+e._id||!1).addClass("bg-info")}closeMessageOptions(){this.showOptionsMsg=!this.showOptionsMsg,$("#msg-"+this.msgSelected._id||!1).removeClass("bg-info")}deleteMessage(){c()({title:"\xbfSe encuentra segur@?",text:"El elemento se borrar\xe1 definitivamente, \xbfconfirma la acci\xf3n?",icon:"warning",buttons:["Cancelar","De acuerdo"],dangerMode:!0}).then(e=>{e&&this.messageService.deleteMessage(this.msgSelected).subscribe(e=>{c()("Mensaje eliminado correctamente!","","success"),$("#"+e._id).remove(),this.showOptionsMsg=!1},e=>c()("Ocurrio un error!","No se pudo eliminar el mensaje!! \n"+e,"error"))})}searchInput(){c()({content:{element:"input",attributes:{placeholder:"Ingrese su b\xfasqueda",type:"text"}},buttons:{confirm:!0,cancel:!0}}).then(e=>{e&&(this.loading=!0,this.search=e,this.searchOption=!0,this.messageService.searchMessages(this.room,this.search).subscribe(e=>{this.msgs=e.msgs.reverse(),this.loading=!1,this.searchTotal=e.total,0===this.total&&c()({title:"Sin resultados!!",icon:"info"})},e=>{this.loading=!0,this.showSwalError(e),this.loadMessages(),console.log(e)}))})}moreSearchMessages(){this.loading=!0,this.from+=10,this.messageService.searchMessages(this.room,this.search,this.from).subscribe(e=>{console.log(e.msgs),this.msgs=e.msgs.reverse().concat(this.msgs.concat()),console.log(this.msgs),this.loading=!1},e=>{this.loading=!0,this.showSwalError(e),this.loadMessages(),console.log(e)})}hideSearch(){this.searchOption=!1,this.from=0,this.searchTotal=0,this.loadMessages()}deleteChat(){c()({title:"\xbfSe encuentra segur@?",text:"Est\xe1 opci\xf3n eliminar\xe1 de manera PERMANENTE todos los mensajes, im\xe1genes, archivos de la conversaci\xf3n. ",icon:"warning",buttons:["Cancelar","De acuerdo"],dangerMode:!0}).then(e=>{e&&this.chatService.deleteChat(this.room).subscribe(e=>{c()("Conversaci\xf3n eliminada correctamente!",`Mensajes eliminados: ${e.totalMessagesDeleted}\nArchivos eliminados: ${e.totalFilesDeleted}`,"success"),this.router.navigate(["profile/chat"])},e=>c()("Ocurrio un error!","No se pudo eliminar la conversaci\xf3n!! \n"+e,"error"))})}sendMsg(e,t){if(t.preventDefault(),void 0===this.room)return c()("Chat inv\xe1lido!","","error"),void this.router.navigate(["/profile/chat/"]);if(""===e)return void c()("Mensaje vac\xedo!","","warning");const i={room:this.room,message:e,type:"TXT",_idTemp:this.getIdTmp(),status:"SENDING"};i.date=new Date,i.sender=this.userService.getUserAuth(),$("#inputMessageTxt").val(""),"CHAT"===this.roomInfo.type?(i.contact=this.participants.filter(e=>e._id!==this.userService.getUserAuth()._id)[0],this.messageService.sendMessage(i).subscribe(e=>{$("#msg-"+i._idTemp).attr("id","msg-"+e.data._id),this.msgs=this.msgs.filter(t=>(t._idTemp===i._idTemp&&(t._id=e.data._id,t.status=e.data.status),t)),this.removeSpinner(i._idTemp),i.status=e.data.status},e=>{c()("No se envi\xf3 el mensaje!!","Int\xe9ntelo de nuevo.\n"+e,"error")})):i.participants=this.participants,this.addMsg(i)}addMsg(e){this.msgs.push(e)}newMsg(e){e.preventDefault()}newMsgEventEmit(){$("#newMsgButton").click()}getIdTmp(){return 999999999*(new Date).getMilliseconds()+""}removeSpinner(e){$("#spinner-"+e).remove()}showSwalError(e){c()({title:"Ha ocurrido un error!!",text:"Int\xe9ntelo de nuevo por favor."+e,icon:"error"})}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(s.c),r.Lb(a.a),r.Lb(d.e),r.Lb(d.j),r.Lb(s.a),r.Lb(b.a),r.Lb(l.a))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-messages"]],hostBindings:function(e,t){1&e&&r.Vb("resize",function(e){return t.onWindowResize(e)},!1,r.qc)},decls:28,vars:15,consts:[["class","alert alert-info text-center p-4 rounded rounded-lg animated bounceIn","role","alert",4,"ngIf"],["class","container mt-2",4,"ngIf"],["id","container-msg",1,"mb-5","mb-lg-0"],[1,"dropdown"],["size","2x","id","optionsChat","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"pointer","options-chat",3,"icon"],["aria-labelledby","optionsChat",1,"dropdown-menu","rounded","animated","fadeIn"],["type","button",1,"dropdown-item",3,"click"],["size","2x",1,"text-danger",3,"icon"],[1,"msg_history"],["class","text-center text-muted font-italic",4,"ngIf"],["class","text-center text-muted font-italic pt-5 mt-5",4,"ngIf"],["id","msgs-container"],[4,"ngFor","ngForOf"],["id","endChat"],[1,"type_msg"],[1,"input_msg_write"],["class","row pr-2",4,"ngIf"],["class","row",4,"ngIf"],["class","row pr-4",4,"ngIf"],["role","alert",1,"alert","alert-info","text-center","p-4","rounded","rounded-lg","animated","bounceIn"],["size","5x",3,"icon","pulse"],[1,"container","mt-2"],[1,"row"],[1,"col-12","col-md-9"],[1,"text-break"],[1,"text-muted"],[1,"col-1"],["type","button",1,"btn","btn-info","btn-lg",3,"click"],[1,"icon-search"],["class","col-1",4,"ngIf"],["type","button",1,"btn","btn-danger","btn-lg",3,"click"],["type","button",1,"btn","btn-success","btn-lg",3,"click"],["size","lg",3,"icon"],[1,"text-center","text-muted","font-italic"],[1,"text-center","text-muted","font-italic","pt-5","mt-5"],[1,"text-primary"],[4,"ngIf"],[3,"id",4,"ngIf"],[1,"animated","fadeIn",3,"id"],[1,"received_withd_msg"],[1,"chat_photo"],[1,"img","img-fluid","width-50","rounded","rounded-lg","ml-2",3,"src","alt"],[1,"received_msg"],["name","msg-image","class","img img-fluid rounded rounded-lg ml-2",3,"src","alt",4,"ngIf"],["class","text-secondary","size","5x",3,"icon",4,"ngIf"],[1,"time_date"],["name","msg-image",1,"img","img-fluid","rounded","rounded-lg","ml-2",3,"src","alt"],["size","5x",1,"text-secondary",3,"icon"],[3,"id"],[1,"outgoing_msg","animated","fadeIn",3,"id"],[1,"sent_msg",3,"click"],["class","text-info","size","5x",3,"icon","pulse",4,"ngIf"],["name","msg-image","class","img img-fluid rounded rounded-lg ml-2","alt","ERROR AL ENVIAR ARCHIVO",3,"src",4,"ngIf"],["name","msg-image","class","img img-fluid rounded rounded-lg ml-2","alt","Enviando ...",3,"id","src",4,"ngIf"],["class","spinner-border text-info","role","status",3,"id",4,"ngIf"],["size","5x",1,"text-info",3,"icon","pulse"],["name","msg-image","alt","ERROR AL ENVIAR ARCHIVO",1,"img","img-fluid","rounded","rounded-lg","ml-2",3,"src"],["name","msg-image","alt","Enviando ...",1,"img","img-fluid","rounded","rounded-lg","ml-2",3,"id","src"],["role","status",1,"spinner-border","text-info",3,"id"],[1,"sr-only"],[1,"row","pr-2"],["col","col"],[1,"form-control","invisible","col-1"],[1,"col","text-right"],["type","button",1,"btn_msg_send_trash",3,"click"],[1,"icon-bin"],[1,"col-12"],["name","mensajeTxt","id","inputMessageTxt","placeholder","Escriba un mensaje...","autofocus","","rows","1","autofocus","",1,"form-control","escribirMsg",3,"defaultValue","keydown.enter"],["mensaje",""],["type","button","id","submitMsgButton",1,"btn_msg_send",3,"click"],[1,"icon-forward3"],["type","button","id","newMsgButton",1,"btn_msg_send","d-none",3,"click"],[1,"row","pr-4"],[1,"col"],["type","button",1,"btn_msg_send",3,"click"],[1,"icon-file-picture"],[1,"icon-files-empty"]],template:function(e,t){1&e&&(r.yc(0,u,6,3,"div",0),r.yc(1,v,19,3,"div",1),r.Mb(2,"hr"),r.Ob(3,"div",2),r.Ob(4,"div",3),r.Mb(5,"fa-icon",4),r.Ob(6,"div",5),r.Ob(7,"button",6),r.Vb("click",function(){return t.deleteChat()}),r.Mb(8,"fa-icon",7),r.Ob(9,"b"),r.zc(10,"Eliminar chat"),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Ob(11,"div",8),r.yc(12,O,3,0,"div",9),r.yc(13,_,3,0,"div",10),r.yc(14,M,3,0,"div",9),r.Ob(15,"div",11),r.yc(16,V,3,2,"div",12),r.Mb(17,"label",13),r.Nb(),r.Nb(),r.Ob(18,"div",14),r.Ob(19,"div",15),r.yc(20,A,10,0,"div",16),r.yc(21,F,7,0,"div",17),r.yc(22,U,10,0,"div",18),r.Nb(),r.Nb(),r.Nb(),r.Mb(23,"br"),r.Mb(24,"br"),r.Mb(25,"br"),r.Mb(26,"br"),r.Mb(27,"br")),2&e&&(r.hc("ngIf",t.loading),r.xb(1),r.hc("ngIf",t.searchOption),r.xb(2),r.wc("max-height: "+t.height+"px;"),r.xb(2),r.hc("icon",r.lc(13,j)),r.xb(3),r.hc("icon",r.lc(14,D)),r.xb(4),r.hc("ngIf",!t.room||""===t.room),r.xb(1),r.hc("ngIf",0===t.msgs.length),r.xb(1),r.hc("ngIf",t.lastMsgs&&t.msgs.length>0),r.xb(2),r.hc("ngForOf",t.msgs),r.xb(4),r.hc("ngIf",t.showOptionsMsg),r.xb(1),r.hc("ngIf",!t.searchOption),r.xb(1),r.hc("ngIf",!t.searchOption))},directives:[n.l,g.a,n.k],pipes:[h.a,n.e],styles:[".options-chat[_ngcontent-%COMP%]{float:right;padding:0;margin:0}.btn_msg_send[_ngcontent-%COMP%]{background:#05728f none repeat scroll 0 0;top:0;width:50px}.btn_msg_send[_ngcontent-%COMP%], .btn_msg_send_search[_ngcontent-%COMP%]{border:none;border-radius:20%;color:#fff;cursor:pointer;font-size:30px;height:40px;position:absolute;right:0}.btn_msg_send_search[_ngcontent-%COMP%]{background:orange none repeat scroll 0 0;width:70px;top:5px}.msg_history[_ngcontent-%COMP%]{height:335px;overflow-y:auto}.chat_photo[_ngcontent-%COMP%]{display:inline-block}.received_withd_msg[_ngcontent-%COMP%]{max-width:70%}.received_withd_msg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:#ebebeb none repeat scroll 0 0;border-radius:3px;color:#646464;font-size:14px;margin:0;padding:5px 10px 5px 12px;width:100%}.received_msg[_ngcontent-%COMP%]{display:inline-block;padding:0 0 0 10px;vertical-align:top;max-width:80%}.time_date[_ngcontent-%COMP%]{color:#747474;display:block;font-size:12px;margin:8px 0 0}.outgoing_msg[_ngcontent-%COMP%]{overflow:hidden;margin:26px 0;cursor:pointer}.sent_msg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:#05728f none repeat scroll 0 0;border-radius:3px;font-size:14px;margin:0;color:#fff;padding:5px 10px 5px 12px}.sent_msg[_ngcontent-%COMP%]{float:right;max-width:50%}.type_msg[_ngcontent-%COMP%]{border-top:1px solid #c4c4c4;border-bottom:1px solid #c4c4c4;position:relative}.input_msg_write[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent none repeat scroll 0 0;border:none;color:#4c4c4c;font-size:15px;min-height:48px;width:100%}.btn_msg_send_trash[_ngcontent-%COMP%]{background:red none repeat scroll 0 0;border:none;border-radius:20%;color:#fff;cursor:pointer;font-size:30px;height:40px;position:absolute;right:0;width:70px;top:5px}.escribirMsg[_ngcontent-%COMP%]{width:90%}img[_ngcontent-%COMP%]{background:transparent url(Wedges-3s-200px.2f0125661784f23fc6a0.svg) 50% no-repeat}.img-no-send[_ngcontent-%COMP%]{opacity:.25}"]}),e})(),data:{title:"Chat"}},{path:"conversation/new/:id",component:(()=>{class e{constructor(e,t,i){this.router=e,this.activatedRoute=t,this.chatService=i,this.loading=!0,this.activatedRoute.params.subscribe(e=>{this.createChat(e.id)})}ngOnInit(){}createChat(e){this.chatService.createChat(e).subscribe(e=>{this.router.navigate(["/profile/chat/conversation",e])},e=>{c()("No se realiz\xf3 la creaci\xf3n del chat","Int\xe9ntelo de nuevo.\n"+e,"error"),this.loading=!1,this.router.navigate(["/profile/chat"])})}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(s.c),r.Lb(s.a),r.Lb(d.e))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-create-room"]],decls:1,vars:1,consts:[["class","alert alert-info text-center p-4 rounded rounded-lg animated bounceIn","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-info","text-center","p-4","rounded","rounded-lg","animated","bounceIn"],["size","5x",3,"icon","pulse"]],template:function(e,t){1&e&&r.yc(0,G,6,3,"div",0),2&e&&r.hc("ngIf",t.loading)},directives:[n.l,g.a],encapsulation:2}),e})(),data:{title:"Chat"}},{path:"**",pathMatch:"full",redirectTo:"PageNotFound",data:{title:"Page Not Found"}}]);var H=i("iTUp"),W=i("wHSu");let X=(()=>{class e{constructor(e){e.addIcons(W.n,W.l,W.f,W.r,W.q,W.g,W.a)}}return e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({factory:function(t){return new(t||e)(r.Sb(g.b))},providers:[d.e],imports:[[n.b,B,g.c,H.a]]}),e})()}}]);